<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<!-- 	This is the "Head" of the HTML document.
		It contains information that isn't displayed on the actual page, but is useful
		for the web browser when loading the page	
	-->
	<head>
		<!-- This is the title of the page. It is the text that appears inside this pages tab in your web browser -->
		<title>AstroSites</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!-- 	This links to this page's CSS, which is contained in the folder assets/css and the file main.css.
			 If you want to edit the styling of this page, you should edit the file assets/css/main.css
			 If you have a new CSS file you'd like to add with custom styling, you should link to it here using:
			 <link rel="stylesheet" href="assets/css/my-new-css-file.css"/> 
		-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!-- 	In the case that the user's browser does not support JavaScript (unlikely, but possible), the page
			will load a separate set of CSS stylings from the file assets/css/noscript.css
			Any HTML contained inside <noscript></noscript> tags will be loaded in the event that JavaScript is not
			available. 
		-->

                <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />

                <script type="text/javascript" charset="UTF-8" src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>

		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<!-- The body is the location where your site's content will go -->
	<body class="is-preload">

			<!-- This "div" wraps around all of our content and just changes how things are layed out -->
			<div id="wrapper">

					<!-- This is where the content that appears on page load exists -->
					<header id="header">
						<!-- This is the main content of the front page -->
						<div class="content">
							<div class="inner">
								<!-- Here is a heading where you can put your name -->
								<h1>
									GW Surfing
								</h1>
								<!-- 	Here is an image where you can put a picture of you. 
									You can change the width and height attributes below to change how large
									your image is.

									Try adding "border-radius: 50%;" to the style attribute.
								-->
								<img src="images/gw-surfing.jpg" style="width:280px; height:280px; object-fit: cover;">
							</div>
						</div>
                                        <div id="box" class="jxgbox" style="width:500px; height:500px;"></div>
                                            <script type="text/javascript">
                                                // preamble
                                                // create n dimensional array
                                                function createArray(length) {
                                                    var arr = new Array(length || 0),
                                                    i = length;
                                                    if (arguments.length > 1) {
                                                        var args = Array.prototype.slice.call(arguments, 1);
                                                        while(i--) arr[length-1 - i] = createArray.apply(this, args);
                                                    }
                                                
                                                    return arr;
                                                }


                                                //////// graphics stuff

                                                // coordinates of top left corner
                                                var TLx = -700;
                                                var TLy = 100;
                                                // coordinates of bottom right corner
                                                var BRx = 12650;
                                                var BRy = -100;
                                                 
                                                // Initialise board
                                                var board = JXG.JSXGraph.initBoard('box', {boundingbox: [TLx, TLy, BRx, BRy], axis: true, grid: false});
         
                                                board.suspendUpdate();
           
                                                // Define sliders to dynamically change parameters of the equations and create text elements to describe them
                                                //s = board.create('slider', [[20.0,26.0],[25.0,26.0],[0.0,0.3,1.0]],{name:'&epsilon;1',strokeColor:'black',fillColor:'black'});
                                                //st = board.create('text', [20,25, "Birth rate predators"], {fixed:true});
                                                //u = board.create('slider', [[20.0,24.0],[25.0,24.0],[0.0,0.7,1.0]],{name:'&epsilon;2',strokeColor:'black',fillColor:'black'});
                                                //ut = board.create('text', [20,23, "Death rate predators"], {fixed:true});
           
                                                //o = board.create('slider', [[10.0,26.0],[15.0,26.0],[0.0,0.1,1.0]],{name:'&gamma;1',strokeColor:'black',fillColor:'black'});
                                                //ot = board.create('text', [10,25, "Death rate preys/per predator"], {fixed:true});
                                                //p = board.create('slider', [[10.0,24.0],[15.0,24.0],[0.0,0.3,1.0]],{name:'&gamma;2',strokeColor:'black',fillColor:'black'});
                                                //pt = board.create('text', [10,23, "Reproduction rate pred./per prey"], {fixed:true});
                                                // sg adds
                                                a = board.create('slider', [[8000,90],[10000,90],[50,100,200]],{name:'R',strokeColor:'black',fillColor:'black'});
                                                m1 = board.create('slider', [[8000,80],[10000,80],[0.1,0.75,1.0]],{name:'m1',strokeColor:'black',fillColor:'black'});
                                                m2 = board.create('slider', [[8000,70],[10000,70],[0.1,0.25,1.0]],{name:'m2',strokeColor:'black',fillColor:'black'});

                                                var mass1 = m1.Value();
                                                var mass2 = m2.Value();
                                                var M = mass1 + mass2;
                                                var R = a.Value();
                                                var Torb = 2.*Math.PI*Math.sqrt(R**3/M);
                                                var Omega = 2.*Math.PI/Torb;

                                                // more variables for calculations
                                                var Nt = 202; // number of time steps to use
                                                var Nth = 41; // number of steps in cos theta to use
                                                var Nph = 30; // number of steps in phi to use
                                                var dt = 2.*Torb/Nt; // time steps

                                                var prefacm1 = -R*mass1/M;
                                                //var prefacm1Omega = prefacm1*Omega;
                                                var prefacm2 = R*mass2/M;
                                                //var prefacm2Omega = prefac2*Omega;

                                                // array for time stamps
                                                var tt = [];//CreateArray(Nt);
                                                var yt = [];//;CreateArray(Nt);
                                                for (var i=0; i<Nt; i++){
                                                    tt[i] = i*dt;
                                                    //yt[i] = prefacm2*Math.sin(Omega*tt[i]);
                                                    yt[i] = prefacm2*Math.sin(Omega*tt[i]);
                                                    //yt[i] = 10.*Math.sin(Omega*tt[i]) + 5.;
 
                                                }

//
//                                                // prefactors to save time 

                                                // arrays for theta+sin/cos
                                                var dcostheta = 2./(Nth-1);
                                                var theta = [];
                                                var costheta = [];
                                                var sintheta = [];
                                                for (var i=0; i<Nth;i++){
                                                    costheta[i] = -1. + i*dcostheta;
                                                    theta[i] = Math.acos(costheta[i]);
                                                    sintheta[i] = Math.sin(theta[i]);

                                                }
//                                                
                                                // arrays for phi+sin/cos
                                                var dphi = 2.*Math.PI/Nph
                                                var phi = [];
                                                var cosphi = [];
                                                var sinphi = [];
                                                for (var i=0; i<Nph;i++){
                                                    phi[i] = i*dphi;
                                                    cosphi[i] = Math.cos(phi[i]);
                                                    sinphi[i] = Math.sin(phi[i]);
                                                }

                                                // array for position vector of mass 1
                                                var X1x = [];
                                                var X1y = [];

                                                //make arrays for positions and mass quadrupole moments
                                                // array for position vector of mass 1
                                                var X1 = [Nt];
                                                // array for position vector of mass 2
                                                var X2 = [Nt];
                                                // mass quadrupole moment and time derivatives
                                                var Iij = [Nt];
                                                var dIij = [Nt];
                                                var ddIij = [Nt];
                                                var dddIij = [Nt];

                                                for (var it=0;it<Nt;it++){
                                                    X1[it] = [3];
                                                    X2[it] = [3];

                                                    Iij[it] = [3];
                                                    dIij[it] = [3];
                                                    ddIij[it] = [3];
                                                    dddIij[it] = [3];

                                                    for (var i=0;i<3;i++){
                                                        Iij[it][i] = [3];
                                                        dIij[it][i] = [3];
                                                        ddIij[it][i] = [3];
                                                        dddIij[it][i] = [3];
                                                    }
                                                }

                                                // loop over time steps
                                                for (var it=0; it<Nt; it++){
                                                    var Omegat = Omega*tt[it];
                                                    var sinOmegat = Math.sin(Omegat);
                                                    var cosOmegat = Math.cos(Omegat);
                                                
                                                    // X1[it,:]=R*m2/M*np.array([np.cos(ph),np.sin(ph),0])
                                                    X1x[it]=prefacm2*cosOmegat;
                                                    X1y[it]=prefacm2*sinOmegat;

                                                    X1[it][0] = prefacm2*cosOmegat;
                                                    X1[it][1] = prefacm2*sinOmegat;
                                                    X1[it][2] = 0;

                                                    // X2[it,i]=-R*m1/M*np.array([np.cos(ph),np.sin(ph),0]) 
                                                    X2[it][0] = prefacm1*cosOmegat;
                                                    X2[it][1] = prefacm1*sinOmegat;
                                                    X2[it][2] = 0;

                                                    for (var i=0; i<3; i++){
                                                        for (var j=0; j<3; j++){
                                                            // mass quadrupole 
                                                            Iij[it][i][j]=mass1*X1[it][i]*X1[it][j]+mass2*X2[it][i]*X2[it][j];
                                                        }
                                                    }
                                                }
                                                //
                                                // calculate derivatives of mass quadrupole
                                                twodt = 2.*dt;
                                                for (var i=0; i<3; i++){
                                                   for (var j=0; j<3; j++){

                                                        // first time derivative
                                                        // deal w edge cases first
                                                        dIij[0][i][j] = (-3.*Iij[0][i][j] + 4.*Iij[1][i][j] - Iij[2][i][j])/twodt;
                                                        dIij[Nt-1][i][j] = (Iij[Nt-3][i][j] - 4.*Iij[Nt-2][i][j] + 3.*Iij[Nt-1][i][j])/twodt;
                                                        // now loop over rest
                                                        for (var it=1; it<Nt-1; it++){
                                                            // first time derivative
                                                            dIij[it][i][j] = (Iij[it+1][i][j] - Iij[it-1][i][j])/twodt;
                                                        }

                                                        // second time derivative
                                                        // deal w edge cases first
                                                        ddIij[0][i][j] = (-3.*dIij[0][i][j] + 4.*dIij[1][i][j] - dIij[2][i][j])/twodt;
                                                        ddIij[Nt-1][i][j] = (dIij[Nt-3][i][j] - 4.*dIij[Nt-2][i][j] + 3.*dIij[Nt-1][i][j])/twodt;
                                                        // now loop over rest
                                                        for (var it=1; it<Nt-1; it++){
                                                            // first time derivative
                                                            ddIij[it][i][j] = (dIij[it+1][i][j] - dIij[it-1][i][j])/twodt;
                                                        }
                                                
                                                        // third time derivative
                                                        // deal w edge cases first
                                                        dddIij[0][i][j] = (-3.*ddIij[0][i][j] + 4.*ddIij[1][i][j] - ddIij[2][i][j])/twodt;
                                                        dddIij[Nt-1][i][j] = (ddIij[Nt-3][i][j] - 4.*ddIij[Nt-2][i][j] + 3.*ddIij[Nt-1][i][j])/twodt;
                                                        // now loop over rest
                                                        for (var it=1; it<Nt-1; it++){
                                                            // first time derivative
                                                            dddIij[it][i][j] = (ddIij[it+1][i][j] - ddIij[it-1][i][j])/twodt;
                                                        }
                                                    }
                                                }
 


                                                var plotarr1 = [Nt];
                                                var plotarr2 = [Nt];
                                                var plotarr3 = [Nt];
                                                for (var it=0;it<Nt;it++){
                                                    plotarr1[it] = dddIij[it][0][0];
                                                    plotarr2[it] = dddIij[it][0][1];
                                                }
////                                                
 
                                                var c = board.create('curve',[tt,X1x],{strokeColor:'magenta',strokeWidth:3});                                                
//                                                var d = board.create('curve',[tt,X1[][1]],{strokeColor:'green',strokeWidth:3});                                                


                                                board.unsuspendUpdate(); 
           
                                                // function to calculate hp
                                                //function get_hp(){
                                                //    // arrays for particle positions and velocities
                                                //    var X1 = CreateArray(Nt,3);
                                                //    var X2 = CreateArray(Nt,3);
                                                //    var V1 = CreateArray(Nt,3);
                                                //    var V2 = CreateArray(Nt,3);
                                                //
                                                //    // arrays for quadrupole moments and derivatives
                                                //    var Iij = CreateArray(Nt,3,3);
                                                //    var dIij = CreateArray(Nt,3,3);
                                                //    var ddIij = CreateArray(Nt,3,3);
                                                //    var dddIij = CreateArray(Nt,3,3);
                                                //
                                                //    // prefactors to save time 
                                                //    var prefacm1 = -R*mass1/M;
                                                //    var prefacm1Omega = prefacm1*Omega;
                                                //    var prefacm2 = R*mass2/M;
                                                //    var prefacm2Omega = prefac2*Omega;
                                                //
                                                //    for (var it=0; it<Nt; it++){
                                                //        var Omegat = Omega*tt[it];
                                                //        var sinOmegat = Math.sin(Omegat);
                                                //        var cosOmegat = Math.cos(Omegat);
                                                //
                                                //        // X1[it,:]=R*m2/M*np.array([np.cos(ph),np.sin(ph),0])
                                                //        X1[it,0]=prefacm2*cosOmegat;
                                                //        X1[it,1]=prefacm2*sinOmegat;
                                                //        X1[it,2]=0;
                                                //       
                                                //        // V1[it,i]=R*m2/M*Omg*np.array([-np.sin(ph),np.cos(ph),0])
                                                //        V1[it,0]=-prefacm2Omega*sinOmegat;
                                                //        V1[it,1]=prefacm2Omega*cosOmegat;
                                                //        V1[it,2]=0;
                                                //
                                                //        // X2[it,i]=-R*m1/M*np.array([np.cos(ph),np.sin(ph),0])
                                                //        X2[it,0]=prefacm1*cosOmegat;
                                                //        X2[it,1]=prefacm1*sinOmegat;
                                                //        X2[it,2]=0;
                                                //
                                                //        //V2[it,i]=-R*m1/M*Omg*np.array([-np.sin(ph),np.cos(ph),0])
                                                //        V2[it,0]=-prefacm1Omega*sinOmegat;
                                                //        V2[it,1]=prefacm1Omega*cosOmegat;
                                                //        V2[it,2]=0;
                                                //       
                                                //        for (var i=0; i<3; i++){
                                                //            for (var j=0; j<3; j++){
                                                //                // mass quadrupole 
                                                //                Iij[it,i,j]=mass1*X1[it,i]*X1[it,j]+mass2*X2[it,i]*X2[it,j];
                                                //            }
                                                //        }
                                                //    }
                                                //
                                                //    // calculate derivatives
                                                //    twodt = 2.*dt;
                                                //    for (var i=0; i<3; i++){
                                                //       for (var j=0; j<3; j++){
                                                //            // first time derivative
                                                //            // deal w edge cases first
                                                //            dIij[0,i,j] = (-3.*Iij[0,i,j] + 4.*Iij[1,i,j] - Iij[2,i,j])/twodt;
                                                //            dIij[Nt-1,i,j] = (Iij[Nt-3,i,j] - 4.*Iij[Nt-2,i,j] + 3.*Iij[Nt-1,i,j])/twodt;
                                                //            // now loop over rest
                                                //            for (var it=1; it<Nt-1; it++){
                                                //                // first time derivative
                                                //                dIij[it,i,j] = (Iij[it+1,i,j] - Iij[it-1,i,j])/twodt;
                                                //            }
                                                //
                                                //            // second time derivative
                                                //            // deal w edge cases first
                                                //            ddIij[0,i,j] = (-3.*dIij[0,i,j] + 4.*dIij[1,i,j] - dIij[2,i,j])/twodt;
                                                //            ddIij[Nt-1,i,j] = (dIij[Nt-3,i,j] - 4.*dIij[Nt-2,i,j] + 3.*dIij[Nt-1,i,j])/twodt;
                                                //            // now loop over rest
                                                //            for (var it=1; it<Nt-1; it++){
                                                //                // first time derivative
                                                //                ddIij[it,i,j] = (dIij[it+1,i,j] - dIij[it-1,i,j])/twodt;
                                                //            }
                                                //
                                                //            // third time derivative
                                                //            // deal w edge cases first
                                                //            dddIij[0,i,j] = (-3.*ddIij[0,i,j] + 4.*ddIij[1,i,j] - ddIij[2,i,j])/twodt;
                                                //            dddIij[Nt-1,i,j] = (ddIij[Nt-3,i,j] - 4.*ddIij[Nt-2,i,j] + 3.*ddIij[Nt-1,i,j])/twodt;
                                                //            // now loop over rest
                                                //            for (var it=1; it<Nt-1; it++){
                                                //                // first time derivative
                                                //                dddIij[it,i,j] = (ddIij[it+1,i,j] - ddIij[it-1,i,j])/twodt;
                                                //            }
                                                //        }
                                                //    }



                                                //    return dddIij;
                                                //} 
           
                                                //// Variables for the JXG.Curves
                                                //var g3 = null;
                                                //var g4 = null;
                                                //var g5 = null;
                                                //
                                                //// Initialise ODE and solve it with JXG.Math.Numerics.rungeKutta()
                                                //function ode() {
                                                //
                                                //    // Omega
                                                //    var M = m1.Value() + m2.Value();
                                                //    var Torb = 2.*Math.PI*Math.sqrt(a.Value()**3/M);
                                                //    var Omega = 2.*Math.PI/Torb;
                                                //
                                                //    var Nt = 202;
                                                //    var dt = 2.*Torb/Nt;
                                                //
                                                //    // evaluation interval
                                                //    var I = [0, 25];
                                                //    // Number of steps. 1000 should be enough
                                                //    var N = 1000;
                                                //
                                                //    // Right hand side of the ODE dx/dt = f(t, x)
                                                //    var f = function(t, x) {
                                                //        var bpred = s.Value();//0.3;
                                                //        var bprey = u.Value();//0.7;
                                                //        var dpred = o.Value();//0.1;
                                                //        var dprey = p.Value();//0.3;
                                                //
                                                //        var y = [];
                                                //        y[0] = x[0]*(bpred - dpred*x[1]);
                                                //        y[1] = -x[1]*(bprey - dprey*x[0]);
                                                //
                                                //        return y;
                                                //    }
                                                //
                                                //    // Initial value
                                                //    var x0 = [startpred.Y(), startprey.Y()];
                                                //
                                                //    // Solve ode
                                                //    var data = JXG.Math.Numerics.rungeKutta('euler', x0, I, N, f);
                                                //
                                                //    // to plot the data against time we need the times where the equations were solved
                                                //    var q = I[0];
                                                //    var h = (I[1]-I[0])/N;
                                                //    for(var i=0; i<data.length; i++) {
                                                //        data[i].push(q);
                                                //        q += h;
                                                //    }
                                                //
                                                //    return data;
                                                //}
                                                //
                                                //// get data points
                                                //var data = ode();
                                                //var dddIij = get_hp();
                                                //
                                                //// copy data to arrays so we can plot it using JXG.Curve
                                                //var t = [];
                                                //var time = [];
                                                //var dataprey = [];
                                                //var datapred = [];
                                                //var testarr = [];
                                                //var testarr2 = [];
                                                //
                                                //var M = m1.Value() + m2.Value();
                                                //var Torb = 2.*Math.PI*Math.sqrt(a.Value()**3./M);
                                                //var Omega = 2.*Math.PI/Torb;
                                                //
                                                //var Nt = 202;
                                                //var dt = 2.*Torb/Nt;

                                                //// Plot Predator
                                                //var dddIijone = CreateArray(Nt)
                                                //var dddIijtwo = CreateArray(Nt)
                                                //var OmegaArr = CreateArray(Nt)
                                                //
                                                //for(var it=0; it<Nt; it++) {
                                                //    //t[i] = data[i][2];
                                                //    time[it] = i*dt;
                                                //    dddIijone[it] = dddIij[it,0,0];
                                                //    dddIijtwo[it] = dddIij[it,0,1];
                                                //    OmegaArr[it] = 5*Math.sin(Omega*time[i]);
                                                //
                                                //    //datapred[i] = data[i][0];
                                                //    //dataprey[i] = data[i][1];
                                                //    //testarr[i] = 5*Math.sin(Omega*time[i]) + 10;
                                                //    //testarr2[i] = Omega*1000;
                                                //
                                                //}
                                                //
                                                //g3 = board.create('curve', [time, 5*Math.sin(time) + 10], {strokeColor:'red', strokeWidth:'2px'});
                                                ////g3.updateDataArray = function() {
                                                ////    //var dddIij = get_hp();
                                                ////    this.dataX = [];
                                                ////    this.dataY = [];
                                                ////    for(var it=0; it<Nt; it++) {
                                                ////        this.dataX[it] = time[it];
                                                ////        //this.dataY[it] = dddIij[it,0,0];
                                                //
                                                //        this.dataY[it] = Omega*1000;//a.Value()/10.;
                                                //    }
                                                //}


                                                //board.unsuspendUpdate();
                                                //
                                                //// Plot Prey
                                                //// g4 = board.create('curve', [t, dataprey], {strokeColor:'blue', strokeWidth:'2px'});
                                                //// g4.updateDataArray = function() {
                                                ////     var data = ode();
                                                ////     this.dataX = [];
                                                ////     this.dataY = [];
                                                ////     for(var i=0; i<data.length; i++) {
                                                ////         this.dataX[i] = t[i];
                                                ////         this.dataY[i] = data[i][1];
                                                ////    }
                                                ////}
                                                //
                                                // test
                                                //g5 = board.create('curve', [time, dddIijtwo], {strokeColor:'blue', strokeWidth:'2px'});
                                                //g5.updateDataArray = function() {
                                                //    var dddIij = get_hp();
                                                //    this.dataX = [];
                                                //    this.dataY = [];
                                                //    for(var it=0; it<Nt; it++) {
                                                //        this.dataX[it] = time[it];
                                                //        this.dataY[it] = dddIij[it,0,1];
                                                //    }
                                                //}

                                            </script>

					<!-- This is the footer that appears at the bottom of the page -->
					<footer id="footer">
		    				<!-- 	You can change "Untitled" to your name to show everyone that
		    					this is your work.
		    				-->
		    				<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
		    			</footer>
                    
		    	</div>
                    
		    	<!--	This is the background image of the site.
		    		All configuration of the background is done with CSS.
		    		Look in the file assets/css/main.css and search for "#bg" to
		    		see how this element is styled. Look for comments pointing 
		    		to where you can set a new background image.
		    	-->
		    	<div id="bg"></div>
                    
		    	<!-- Scripts -->
		    	<script src="assets/js/jquery.min.js"></script>
		    	<script src="assets/js/browser.min.js"></script>
		    	<script src="assets/js/breakpoints.min.js"></script>
		    	<script src="assets/js/util.js"></script>
		    	<script src="assets/js/main.js"></script>
                
	</body>     
</html>             
                    
                    
                    
                    
                
                    
                    
                    
                    
                    
                    
                
                    
                    
                    
                
                    
                    
                
                    
                    
                
                    
                    
                
                    
                    
                    
                    
                    
                    
                    
                    
                
                    
                    
                    
                    
                    
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
                    
