<!DOCTYPE HTML>
<!--
	Dimension by HTML5 UP
	html5up.net | @ajlkn
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
	<!-- 	This is the "Head" of the HTML document.
		It contains information that isn't displayed on the actual page, but is useful
		for the web browser when loading the page	
	-->
	<head>
		<!-- This is the title of the page. It is the text that appears inside this pages tab in your web browser -->
		<title>GW Surfing</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<!-- 	This links to this page's CSS, which is contained in the folder assets/css and the file main.css.
			 If you want to edit the styling of this page, you should edit the file assets/css/main.css
			 If you have a new CSS file you'd like to add with custom styling, you should link to it here using:
			 <link rel="stylesheet" href="assets/css/my-new-css-file.css"/> 
		-->
		<link rel="stylesheet" href="assets/css/main.css" />
		<!-- 	In the case that the user's browser does not support JavaScript (unlikely, but possible), the page
			will load a separate set of CSS stylings from the file assets/css/noscript.css
			Any HTML contained inside <noscript></noscript> tags will be loaded in the event that JavaScript is not
			available. 
		-->

                <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraph.css" />

                <script type="text/javascript" charset="UTF-8" src="https://cdn.jsdelivr.net/npm/jsxgraph/distrib/jsxgraphcore.js"></script>

		<noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
	</head>
	<!-- The body is the location where your site's content will go -->
	<body class="is-preload">

			<!-- This "div" wraps around all of our content and just changes how things are layed out -->
			<div id="wrapper">

					<!-- This is where the content that appears on page load exists -->
					<header id="header">
						<!-- This is the main content of the front page -->
						<div class="content">
							<div class="inner">
								<!-- Here is a heading where you can put your name -->
								<h1>
									GW Surfing
								</h1>
								<!-- 	Here is an image where you can put a picture of you. 
									You can change the width and height attributes below to change how large
									your image is.

									Try adding "border-radius: 50%;" to the style attribute.
								-->
								<img src="images/gw-surfing.jpg" style="width:280px; height:280px; object-fit: cover;">
							</div>
						</div>

                        <div id="box" class="jxgbox" style="width:500px; height:500px;"></div>
                            <script type="text/javascript">

                                // coordinates of top left corner
                                var TLx = -700;
                                //var TLx = -1.5;
                                var TLy = 100;
                                //var TLy = 28.5;
                                // coordinates of bottom right corner
                                var BRx = 12650;
                                //var BRx = 28.5;
                                var BRy = -100;
                                //var BRy = -1.5;
           
                                // Initialise board
                                board = JXG.JSXGraph.initBoard('box', {boundingbox: [TLx, TLy, BRx, BRy], axis: true, grid: false});
           
                                // Define sliders to dynamically change parameters of the equations and create text elements to describe them
                                s = board.create('slider', [[0.6*BRx,0.85*TLy],[0.8*BRx,0.85*TLy],[0.0,0.3,1.0]],{name:'&epsilon;1',strokeColor:'magenta',fillColor:'magenta'});
                                u = board.create('slider', [[0.6*BRx,0.75*TLy],[0.8*BRx,0.75*TLy],[0.0,0.7,1.0]],{name:'&epsilon;2',strokeColor:'black',fillColor:'black'});
           
                                o = board.create('slider', [[0.1*BRx,0.85*TLy],[0.3*BRx,0.85*TLy],[0.0,0.1,1.0]],{name:'&gamma;1',strokeColor:'black',fillColor:'black'});
                                p = board.create('slider', [[0.1*BRx,0.75*TLy],[0.3*BRx,0.75*TLy],[0.0,0.3,1.0]],{name:'&gamma;2',strokeColor:'black',fillColor:'black'});
                                a = board.create('slider', [[0.1*BRx,0.65*TLy],[0.3*BRx,0.65*TLy],[0.0,0.3,1.0]],{name:'a',strokeColor:'black',fillColor:'black'});
           
                                // Dynamic initial value as gliders on the y-axis
                                startpred = board.create('glider', [0, 10, board.defaultAxes.y], {name:'Preys',strokeColor:'red',fillColor:'red'});
                                startprey = board.create('glider', [0, 5, board.defaultAxes.y], {name:'Predators',strokeColor:'blue',fillColor:'blue'});
                              
                              
                                // Variables for the JXG.Curves
                                var g3 = null;
                                var g4 = null;
           
                                // Initialise ODE and solve it with JXG.Math.Numerics.rungeKutta()
                                function ode() {

                                    var m1 = 0.75;
                                    var m2 = 0.25;
                                    var M = m1 + m2;
                                    var Torb = 2.*Math.PI*Math.sqrt(a.Value()**3/M);
                                    var Omega = 2.*Math.PI/Torb;

                                    // evaluation interval
                                    var I = [0, 25];
                                    var I2 = [0,2.*Torb];
                                    // Number of steps. 1000 should be enough
                                    var N = 1000;
                                    var Nt = 101; // number of timesteps -- keep low for now

                                    // Right hand side of the ODE dx/dt = f(t, x)
                                    var f = function(t, x) {
                                        var R = a.Value();
                                        var Torb = 2.*Math.PI*Math.sqrt(a.Value()**3/M); 

                                        var bpred = s.Value();//0.3;
                                        var bprey = u.Value();//0.7;
                                        var dpred = o.Value();//0.1;
                                        var dprey = p.Value();//0.3;
            
                                        var y = [];
                                        y[0] = x[0]*(bpred - dpred*x[1]);
                                        y[1] = -x[1]*(bprey - dprey*x[0]);
            
                                        return y;
                                    }
            
                                  // Initial value
                                  var x0 = [startpred.Y(), startprey.Y()];
            
                                  // Solve ode
                                  var data = JXG.Math.Numerics.rungeKutta('euler', x0, I, N, f);
                                  //var data2 = [];
            
                                  // to plot the data against time we need the times where the equations were solved
                                  // sg hacky fix -- make better later

                                  var q = 0.;
                                  var h = 2.*Torb/Nt;
                                  for(var i=0; i<data.length; i++) {
                                      data[i].push(q);
                                      q += h;
                                  }

                                  //// to plot the data against time we need the times where the equations were solved
                                  //var time = 0.;
                                  //var timestep = 2.*Torb/Nt;//h2 = (I2[1]-I2[0])/N; // this is dt, get from Nt and Torb
                                  //for(var i=0; i<Nt; i++) {
                                  //    data2[i].push(time); // add to array
                                  //    time += timestep;
                                  //}
 
            
                                  return data;
                                }


           
                                // get data points
                                var data = ode();
                              
                                // copy data to arrays so we can plot it using JXG.Curve
                                var t = [];
                                var dataprey = [];
                                var datapred = [];
                                for(var i=0; i<data.length; i++) {
                                  t[i] = data[i][2];
                                  datapred[i] = data[i][0];
                                  dataprey[i] = data[i][1];
                                }
           
                                // Plot Predator
                                g3 = board.create('curve', [t, datapred], {strokeColor:'magenta', strokeWidth:'2px'});
                                g3.updateDataArray = function() {
                                    var data = ode();
                                    this.dataX = [];
                                    this.dataY = [];
                                    for(var i=0; i<data.length; i++) {
                                        this.dataX[i] = t[i];
                                        this.dataY[i] = data[i][0];
                                    }
                                }
           
                                // Plot Prey
                                g4 = board.create('curve', [t, dataprey], {strokeColor:'blue', strokeWidth:'2px'});
                                g4.updateDataArray = function() {
                                    var data = ode();
                                    this.dataX = [];
                                    this.dataY = [];
                                    for(var i=0; i<data.length; i++) {
                                        this.dataX[i] = t[i];
                                        this.dataY[i] = data[i][1];
                                      }
                                  }

                            </script>

					<!-- This is the footer that appears at the bottom of the page -->
					<footer id="footer">
		    				<!-- 	You can change "Untitled" to your name to show everyone that
		    					this is your work.
		    				-->
		    				<p class="copyright">&copy; Untitled. Design: <a href="https://html5up.net">HTML5 UP</a>.</p>
		    			</footer>
                    
		    	</div>
                    
		    	<!--	This is the background image of the site.
		    		All configuration of the background is done with CSS.
		    		Look in the file assets/css/main.css and search for "#bg" to
		    		see how this element is styled. Look for comments pointing 
		    		to where you can set a new background image.
		    	-->
		    	<div id="bg"></div>
                    
		    	<!-- Scripts -->
		    	<script src="assets/js/jquery.min.js"></script>
		    	<script src="assets/js/browser.min.js"></script>
		    	<script src="assets/js/breakpoints.min.js"></script>
		    	<script src="assets/js/util.js"></script>
		    	<script src="assets/js/main.js"></script>
                
	</body>     
</html>             
                    
        
